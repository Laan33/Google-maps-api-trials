import{r as I,_ as V,g as b,o as _,a as u,c,b as e,d as f,t as y,w as p,v,e as A,F as U,f as L,h as C,i as m,p as S,j as D,k}from"./index-a28a6519.js";import{g,h}from"./index.esm2017-efba12bd.js";const w=I({count:0,increment(){this.count++}});const E={data(){return{handle:"",comment:"",username:"",state:"",commentsArray:[],locationArray:[],editing:!1,tempValue:null,user:null,userID:null,store:w}},created(){this.getComments()},methods:{postComment(){const o=g(m);h(o,"postusercomment")({handle:this.handle,comment:this.comment}).then(s=>{this.getComments()})},getComments(){const o=g(m);h(o,"getcomments")().then(s=>{console.log(s.data),this.commentsArray=s.data})},async getMatchingUsers(){const o=g(m),t=h(o,"getmatchingusers");try{const s=await this.getCurrentUserId();console.log("UID: "+s),t({uid:s,origin:this.state1,destination:this.state2}).then(i=>{console.log(i.data),this.locationArray=i.data})}catch(s){console.error(s)}},postLocation(){const o=g(m);console.log("Posting user location"),console.log(this.state1),h(o,"postuserlocation")({username:this.username,origin:this.state1,destination:this.state2}).then(s=>{console.log(s)})},enableEditing(o){this.tempValue=o,this.editing=!0},disableEditing(){this.tempValue=null,this.editing=!1},save(o){const t=g(m);h(t,"updatecomment?id="+o)({comment:this.tempValue}).then(i=>{this.getComments(),this.editing=!1})},getCurrentUserId(){const o=b(m);return new Promise((t,s)=>{_(o,i=>{i?(console.log("User",i.uid),t(i.uid)):(console.log("No user found"),s(new Error("User not found")))})})},created(){const o=b(m);_(o,t=>{this.user=t,t?console.log("User",t):console.log("No user found")}),this.getComments()},deleteComment(o){const t=g(m);h(t,"deleteusercomment")({id:o}).then(i=>{console.log(i.data),i.data=="Document successfully deleted"&&this.getComments()})}}},r=o=>(S("data-v-273e4076"),o=o(),D(),o),F=r(()=>e("h1",null,"Welcome to my new Blog page",-1)),x={class:"container mt-5"},M={class:"mb-3"},N=r(()=>e("label",{for:"exampleFormControlInput1",class:"form-label"},"Email address",-1)),T={class:"mb-3"},B=r(()=>e("label",{for:"exampleFormControlTextarea1",class:"form-label"},"Comment",-1)),P={class:"mb-3 right"},O={class:"mb-3 right"},z=r(()=>e("br",null,null,-1)),K=r(()=>e("br",null,null,-1)),R={class:"mb-3 center"},Z=r(()=>e("label",{for:"exampleUsernameInput1",class:"form-label"},"Username",-1)),j={class:"mb-3 center"},G=r(()=>e("label",{for:"stateLocation"},"Origin Location",-1)),W=["value"],q=k('<option value="DEFAULT" selected="selected" data-v-273e4076>State</option><option value="AL" data-v-273e4076>Alabama</option><option value="AK" data-v-273e4076>Alaska</option><option value="AZ" data-v-273e4076>Arizona</option><option value="AR" data-v-273e4076>Arkansas</option><option value="CA" data-v-273e4076>California</option><option value="CO" data-v-273e4076>Colorado</option>',7),H=[q],J={class:"mb-3 center"},Q=r(()=>e("label",{for:"stateLocation"},"Destination Location",-1)),X=["value"],Y=k('<option value="DEFAULT" selected="selected" data-v-273e4076>State</option><option value="AL" data-v-273e4076>Alabama</option><option value="AK" data-v-273e4076>Alaska</option><option value="AZ" data-v-273e4076>Arizona</option><option value="AR" data-v-273e4076>Arkansas</option><option value="CA" data-v-273e4076>California</option><option value="CO" data-v-273e4076>Colorado</option>',7),$=[Y],tt={class:"mb-3 right"},et={class:"mb-3 right"},ot=r(()=>e("br",null,null,-1)),nt=r(()=>e("br",null,null,-1)),st={key:0},at={key:0},lt=["onClick"],it={key:1},rt=["onClick"],mt=["onClick"];function dt(o,t,s,i,l,a){return u(),c(U,null,[F,e("p",null,[f("User ID: "),e("button",{type:"button",onClick:t[0]||(t[0]=(...n)=>a.getCurrentUserId&&a.getCurrentUserId(...n)),class:"btn btn-primary"},"Get User id"),f(" "+y(l.userID),1)]),e("div",x,[e("div",M,[N,p(e("input",{type:"email",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=n=>l.handle=n),id:"exampleFormControlInput1",placeholder:"name@example.com"},null,512),[[v,l.handle]])]),e("div",T,[B,p(e("textarea",{class:"form-control","onUpdate:modelValue":t[2]||(t[2]=n=>l.comment=n),id:"exampleFormControlTextarea1",rows:"3"},null,512),[[v,l.comment]])]),e("div",P,[e("button",{type:"button",onClick:t[3]||(t[3]=(...n)=>a.postComment&&a.postComment(...n)),class:"btn btn-primary"},"Post Comment")]),e("div",O,[e("button",{type:"button",onClick:t[4]||(t[4]=(...n)=>a.getComments&&a.getComments(...n)),class:"btn btn-primary"},"Show Comments")]),z,K,e("div",R,[Z,p(e("input",{type:"username",class:"form-control","onUpdate:modelValue":t[5]||(t[5]=n=>l.username=n),id:"exampleUsernameInput1",placeholder:"Username"},null,512),[[v,l.username]])]),e("div",j,[G,p(e("select",{name:"state1","onUpdate:modelValue":t[6]||(t[6]=n=>o.state1=n),id:"state1",value:o.value,onChange:t[7]||(t[7]=n=>o.$emit("input",n.target.value))},H,40,W),[[A,o.state1]])]),e("div",J,[Q,p(e("select",{name:"state2","onUpdate:modelValue":t[8]||(t[8]=n=>o.state2=n),id:"state2",value:o.value,onChange:t[9]||(t[9]=n=>o.$emit("input",n.target.value))},$,40,X),[[A,o.state2]])]),e("div",tt,[e("button",{type:"button",onClick:t[10]||(t[10]=(...n)=>a.postLocation&&a.postLocation(...n)),class:"btn btn-primary"},"Post location")]),e("div",et,[e("button",{type:"button",onClick:t[11]||(t[11]=(...n)=>a.getMatchingUsers&&a.getMatchingUsers(...n)),class:"btn btn-primary"},"Show Matching Users")]),ot,nt,l.commentsArray.length>0?(u(),c("div",st,[e("ul",null,[(u(!0),c(U,null,L(l.commentsArray,n=>(u(),c("li",null,[l.editing?C("",!0):(u(),c("div",at,[e("span",{onClick:d=>a.enableEditing(n.data.comment)},y(n.data.comment),9,lt)])),l.editing?(u(),c("div",it,[p(e("input",{"onUpdate:modelValue":t[12]||(t[12]=d=>l.tempValue=d),class:"input"},null,512),[[v,l.tempValue]]),e("button",{onClick:t[13]||(t[13]=(...d)=>a.disableEditing&&a.disableEditing(...d))}," Cancel "),e("button",{onClick:d=>a.save(n.id)}," Save ",8,rt)])):C("",!0),e("button",{type:"button",onClick:d=>a.deleteComment(n.id),class:"btn btn-primary"},"Delete Comment",8,mt)]))),256))])])):C("",!0)])],64)}const pt=V(E,[["render",dt],["__scopeId","data-v-273e4076"]]);export{pt as default};
